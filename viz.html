<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>PHINCH</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="css/pinch.css">

        <!--[if lt IE 9]>
            <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
            <script>window.html5 || document.write('<script src="lib/html5shiv.js"><\/script>')</script>
        <![endif]-->
    </head>

    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <section id = "header">
            <p id = "LOGO"><a href = "index.html">PHINCH</a></p>
            <div id = "menu">
                <p><a href="viz.html"><i class="icon-chevron-sign-left icon-large" style="display: none;"></i>&nbsp;&nbsp;&nbsp;</a><a href="about.html"><i class="icon-info-sign icon-large"></i>&nbsp;&nbsp;&nbsp;</a><a href="instruction.html"><i class="icon-question-sign icon-large"></i>&nbsp;&nbsp;&nbsp;</a><a href="https://github.com/shujianbu/pinch" target="_blank"><i class="icon-github icon-large"></i></a>&nbsp;&nbsp;&nbsp;<a href="http://phinch.org/blog/" target="_blank"><i class="icon-file-text-o icon-large"></i></a></p>
            </div>
        </section>

        <section id = "up_sec" style="display:none;">
            <div id = "file_details">
                <div id = "back_box">
                    <p id = "box_title"> file details </p>
                    <p id = "file_numbers"></p>
                </div>
            </div>
            <div style="position: absolute; right: 180px; top: 5px;">
                <select id = "attributes_dropdown" style="display: none;"></select>  
            </div>

        </section>

        <section id = "NotSupported">
            <br /> <br />
            <h1>Not Supported</h1>
            <p>The browser you are using does not support <a href="https://developer.mozilla.org/en-US/docs/IndexedDB" target="_blank">IndexedDB</a>, which is required for the Phinch framework!</p>
        </section>

        <section id="GraphGallery">
            <h2>GRAPH GALLERY</h2>
            <a href="preview.html"><button id="goBackFilter"> <&nbsp;&nbsp;FILTER DATA </button></a>
            <!-- Graph 1 -->
            <div class="col3"><img src="img/gallery_1.png">
                <p class = "graphGalleryTitle"><span>Taxonomy Bar</span></p>
            </div>
             <!-- Graph 2 -->
            <div class="col3"><img src="img/gallery_2.png">
                <p class = "graphGalleryTitle"><span>Bubble Chart</span></p>
            </div>
            <!-- Graph 3 -->
            <div class="col3"><img src="img/gallery_3.png">
                <p class = "graphGalleryTitle"><span>Sankey Diagram</span></p>
            </div>
            <!-- Graph 4 -->
            <div class="col3"><img src="img/gallery_4.png">
                <p class = "graphGalleryTitle"><span>Donut Partition</span></p>
            </div>
            <!-- Graph 5 -->
            <div class="col3"> <img src="img/gallery_5.png">
                <p class = "graphGalleryTitle"><span>Attributes Column Chart</span></p>
            </div>
            <!-- Graph 6 -->
            <div class="col3"><img src="img/gallery_6.png">
                <p class = "graphGalleryTitle"><span>Bubble Chart By OTU</span></p>
            </div>

        </section>

        <section id = "viz_container">
            <div id="taxonomy_container"></div> 

            <input type="text" name="search" placeholder="  search..." id = 'tags'>
            <div id = "autoCompleteList"></div>
            <div id="fake_taxonomy_container"></div>
        </section>

        <section class = "footer">
            <p class = "footer_copyright">Copyright Â© 2014 Phinch. This content is released under the <a href="http://opensource.org/licenses/MIT" target="_blank">MIT License.</p>
        </section>

        <script src="lib/jquery-1.10.1.min.js"></script>
        <script src="lib/jquery-ui-1.10.3.custom.min.js"></script>
        <script src="lib/jquery.fracs-0.12.0.min.js"></script>
        <script src="lib/jquery.outline-0.12.0.min.js"></script>

        <script src="lib/dat.gui.min.js"></script>
        <script src="lib/indexedDB.polyfill.js"></script>
        <script src="lib/db.js"></script>
        <script src="lib/d3.v3.min.js"></script>
        <script src="lib/d3.layout.min.js"></script>
        <script src="lib/d3.sankey.js"></script>

        <script src="scripts/taxonomyViz.js"></script>

        <script>
        if ( !( navigator.userAgent.match(/Chrome/i) || navigator.userAgent.match(/Firefox/i) ) || !window.File || !window.FileReader || !window.FileList || !window.Blob ){
            alert('Please use Chrome or Firefox! Your browser does not support the Phinch framework!');
            $('#up_sec').hide();
            $('#GraphGallery').hide();
            $('#NotSupported').show();
            $('.footer').css("position", "fixed");
        } else {


            $( "#GraphGallery img" ).each( function(index) {
                $(this).click( function() {
                    $('#GraphGallery').fadeOut(800, function(){ 
                        $('.icon-chevron-sign-left').show(); 
                        $('#up_sec').fadeIn(800); 

                        var FizzyText = function() {
                            this.Layer2 = false; this.Layer3 = false; this.Layer4 = false; this.Layer5 = false; this.Layer6 = false; this.Layer7 = false;
                            this.Display = 'Values'; this.Export = false; this.Share = false;
                        };

                        var text = new FizzyText();
                        var gui = new dat.GUI();
                        var f1 = gui.addFolder('Layers');
                        f1.add(text, 'Layer2'); f1.add(text, 'Layer3'); f1.add(text, 'Layer4'); f1.add(text, 'Layer5'); f1.add(text, 'Layer6'); f1.add(text, 'Layer7');
                        var f2 = gui.addFolder('Others');
                        f2.add(text, 'Display', [ 'Values', 'Percent' ] );
                        f2.add(text, 'Export'); f2.add(text, 'Share');  

                        gui.domElement.childNodes[1].children[0].children[0].id = 'LayerFolder';
                        gui.domElement.childNodes[1].children[1].children[0].children[0].id = 'otherFuncs';

                        $('#LayerFolder ul li').each( function(index_layer) {
                            d3.select(this).select('.property-name').attr('id', 'layer_' + (index_layer + 1) ).attr('class', 'layer_change');
                            if (index_layer == 1) { d3.select(this).select('.property-name').attr('class', 'loading_notes').attr('class', 'current_layer'); }
                        });

                    });

                    var app = new taxonomyViz(index);
                                      
                });
            });
        }
        </script>

    </body>
</html>
